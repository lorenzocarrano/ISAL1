%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% This will help you in writing your homebook
% Remember that the character % is a comment in latex
%
% chapter 3
\chapter{Integer Multiplier}
\label{cha3}

In this section the MBE-Dadda tree multiplier, from lab 2, has been tested.

\section{Compilation}
Now, in order to compile and simulate the files, that are no more written in system verilog, a dedicated 
bash file has been written to execute this task automatically.

\lstinputlisting[language=bash, caption=sim/sim.sh]{../MBE-Dadda/sim/sim.sh}

\section{Change interface}

The first things that have to be changed are the interface. For the input one there is no problem,
both are still on 32 bits, while the output has the double bits and must be changed from 32 to 64 bits.

\lstinputlisting[language=Verilog]{../MBE-Dadda/src/dut_if.sv}

\section{Change reference model}

The last things that must changed is the reference model. Now the executed operation is a multiplication and 
no more addition and the reference must be changed properly.

\begin{lstlisting}[language=Verilog, caption=Inside refmode.sv]
    ... 

    forever begin
        in.get(tr_in);
        tr_out.data = tr_in.A * tr_in.B;
        $display('refmod: input A = \%d, input B = \%d, 
            output OUT = \%d',tr_in.A, tr_in.B, tr_out.data);
        $display('refmod: input A = \%b, input B = \%b, 
            output OUT = \%b',tr_in.A, tr_in.B, tr_out.data);
        out.put(tr_out);
    end
    
    ...
\end{lstlisting}

\section{Testbench Run}


During the testbench run no mismatches occurred, as shown in the transcript file.\\
\\
\# MBE: input A =       9177, input B =       9725, output OUT =             89246325\\
\# MBE: input A = 00000000000000000010001111011001, input B = 00000000000000000010010111111101, output OUT = 0000000000000000000000000000000000000101010100011100101001110101\\
\# refmod: input A =        9177, input B =        9725, output OUT =    89246325\\
\# refmod: input A = 00000000000000000010001111011001, input B = 00000000000000000010010111111101, output OUT = 00000101010100011100101001110101\\
\# UVM\_INFO @ 45: uvm\_test\_top.env\_h.comp [Comparator Match] \\
\# MBE: input A =       9536, input B =       1307, output OUT =             12463552\\
\# MBE: input A = 00000000000000000010010101000000, input B = 00000000000000000000010100011011, output OUT = 0000000000000000000000000000000000000000101111100010110111000000\\
\# refmod: input A =        9536, input B =        1307, output OUT =    12463552\\
\# refmod: input A = 00000000000000000010010101000000, input B = 00000000000000000000010100011011, output OUT = 00000000101111100010110111000000\\
\# UVM\_INFO @ 75: uvm\_test\_top.env\_h.comp [Comparator Match] \\
\# MBE: input A =       3035, input B =       2330, output OUT =              7071550\\
\# MBE: input A = 00000000000000000000101111011011, input B = 00000000000000000000100100011010, output OUT = 0000000000000000000000000000000000000000011010111110011100111110\\
\# refmod: input A =        3035, input B =        2330, output OUT =     7071550\\
\# refmod: input A = 00000000000000000000101111011011, input B = 00000000000000000000100100011010, output OUT = 00000000011010111110011100111110\\
\# UVM\_INFO @ 105: uvm\_test\_top.env\_h.comp [Comparator Match] \\
\# MBE: input A =       2880, input B =       3695, output OUT =             10641600\\
\# MBE: input A = 00000000000000000000101101000000, input B = 00000000000000000000111001101111, output OUT = 0000000000000000000000000000000000000000101000100110000011000000\\
\# refmod: input A =        2880, input B =        3695, output OUT =    10641600\\
\# refmod: input A = 00000000000000000000101101000000, input B = 00000000000000000000111001101111, output OUT = 00000000101000100110000011000000\\
\# UVM\_INFO @ 135: uvm\_test\_top.env\_h.comp [Comparator Match] \\
\# UVM\_INFO verilog\_src/uvm-1.1d/src/base/uvm\_objection.svh(1267) @ 3045: reporter [TEST\_DONE] 'run' phase is ready to proceed to the 'extract' phase
\# UVM\_INFO ../tb/env.sv(42) @ 3045: uvm\_test\_top.env\_h [env] Reporting matched 101
\# \\
\# --- UVM Report Summary ---\\
\# \\
\# ** Report counts by severity\\
\# UVM\_INFO :  106\\
\# UVM\_WARNING :    0\\
\# UVM\_ERROR :    0\\
\# UVM\_FATAL :    0\\
\# ** Report counts by id\\
\# [Comparator Match]   101\\
\# [Questa UVM]     2\\
\# [RNTST]     1\\
\# [TEST\_DONE]     1\\
\# [env]     1\\
